#!/usr/bin/env python
# -*- coding: utf-8 -*-
# Author: Edilson Alzemand

import sys
import os 
import pynotify
import re
import socket

pynotify.init("ubi")
comand = sys.argv[1:]
enter = ' '.join(comand)
enter = enter.lower()

# notify-send -i /usr/bin/ubi.svg 'Este parece o Ã­cone...'
# show|me|whats|what|is|my|    

def fun (x):
    if x == 'hi' or x == 'hello' or x == 'hey':
        os.system("finger `whoami` | sed 's/.*: *//;q' > log/log.txt")
        a = open ("log/log.txt", "r")
        b = a.read()
        c = 'Hi, '
        d = c + b
        a.close()
        print ("ubi: " + d)
        notify = pynotify.Notification( d , "", "/usr/bin/ubi.svg")
        notify.show()
    elif x == 'i love you' or  x == 'love you' or x == 'love u':
        notify = pynotify.Notification("")
        notify.show()
#    else:
#        notify = pynotify.Notification( "I'm sorry I didn't understand your question" , "", "/usr/bin/ubi.svg")
#        notify.show()
              
     
# user quest
   
def user (x):
    if x == 'whats my username' or x == 'my username' or x == 'what is my username' or x == 'whats my username':
        nome ="finger `whoami` | sed 's/.*: *//;q'"
        os.system("whoami > log/log.txt")
        a = open ("log/log.txt", "r")
        b = a.read()
        c = 'Your username is '
        d = c + b
        a.close()
        print ("ubi: " + d)
        notify = pynotify.Notification( d , "" , "/usr/bin/ubi.svg")
        notify.show()
    elif x == 'whats my real name?' or x == 'my name' or x == 'what is my name?' or x == 'whats my name?':
        nome ="finger `whoami` | sed 's/.*: *//;q'"
        os.system("finger `whoami` | sed 's/.*: *//;q' > log/log.txt")
        a = open ("log/log.txt", "r")
        b = a.read()
        c = 'Your name is '
        d = c + b
        a.close()
        print ("ubi: " + d)
        notify = pynotify.Notification( d , "" , "/usr/bin/ubi.svg")
        notify.show()
#    else:
#        notify = pynotify.Notification( "I'm sorry I didn't understand your question" , "", "/usr/bin/ubi.svg")
#        notify.show() 

def network (x):
    if x == 'what is my ip' or x == 'my ip' or x == 'whats my ip' + '?':
        print ("connecting...")
        os.system('curl -sL http://pannous.net/ip.php > log/log.txt')
        a = open ("log/log.txt", "r")
        b = a.read()
        c = ' '
        d = c + b
        a.close()
        s = socket.socket(socket.AF_INET, socket.SOCK_DGRAM)
        s.connect(("ubuntu.com",80))
        e = (s.getsockname()[0])
        s.close()
        print ("ubi: local " + e)
        print ("ubi: external" + d)
        notify = pynotify.Notification('local: ' + e , 'external: ' + d , "/usr/bin/ubi.svg")
        notify.show()

fun(enter)
user(enter)
network(enter)

